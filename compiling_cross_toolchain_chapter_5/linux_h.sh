#!/bin/bash
echo "################################################################################";
echo "#--------------------------Setting LFS variable--------------------------------#";
echo "################################################################################";
echo;echo;echo;
LFS=/mnt/lfs;
sleep 5;
echo "################################################################################";
echo "#-------------------------Change into sources dir------------------------------#";
echo "################################################################################";
echo;echo;echo;
cd $LFS/sources;
pwd;
sleep 5;
echo "################################################################################";
echo "#----------------------------Extract linux package-----------------------------#";
echo "################################################################################";
echo;echo;echo;
tar -xvf $(find "$LFS/sources" -type f | grep -m3 "$LFS/sources/linux" | grep tar)
sleep 5;
echo "################################################################################";
echo "#--------------------Extracting linux package complete-------------------------#";
echo "################################################################################";
echo;echo;echo;
sleep 2;
echo "################################################################################";
echo "#----------------------------change into linux dir-----------------------------#";
echo "################################################################################";
echo;echo;echo;
cd $(find "$LFS/sources" -type d | grep -m1 "$LFS/sources/linux");
pwd;
sleep 2;
echo "################################################################################";
echo "#---------------------------------make mrproper--------------------------------#";
echo "################################################################################";
echo;echo;echo;
make mrproper
echo "################################################################################";
echo "#----------------------------------make mrproper complete----------------------#";
echo "################################################################################";
echo;echo;echo;
sleep 2;
echo "################################################################################";
echo "#---------------------------------make headers---------------------------------#";
echo "################################################################################";
echo;echo;echo;
make headers;
echo "################################################################################";
echo "#-------------------------------make headers complete--------------------------#";
echo "################################################################################";
echo;echo;echo;
sleep 5;
echo "################################################################################";
echo "#-------------------------------before clean up script-------------------------#";
echo "################################################################################";
echo;echo;echo;
find usr/include -type f ! -name '*.h' -delete;
sleep 1;
cp -rv usr/include $LFS/usr
sleep 1;
echo "################################################################################";
echo "#------------------------------- clean up script-------------------------------#";
echo "################################################################################";
echo;echo;echo;
cd $LFS/sources;
sleep 2;
rm -rf $(find "$LFS/sources" -type d | grep -m1 "$LFS/sources/linux")
echo "################################################################################";
echo "#---------------------------clean up script complete---------------------------#";
echo "################################################################################";
echo;echo;echo;
sleep 5;